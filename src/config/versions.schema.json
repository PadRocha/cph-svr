{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/versions.schema.json",
  "title": "Versions Schema",
  "description": "Schema definition for the versions.json file used by our updater service.",
  "type": "object",
  "properties": {
    "platforms": {
      "type": "object",
      "description": "An object containing version info for each supported platform, keyed by a combination of OS and architecture (e.g., 'windows-x86_64').",
      "patternProperties": {
        "^[a-z]+-[a-z0-9_]+$": {
          "type": "object",
          "title": "Platform Version Info",
          "description": "Version information for a specific platform.",
          "properties": {
            "current_version": {
              "type": "string",
              "description": "The current version number for this platform, e.g., 'v0.3.0' or '0.3.0'.",
              "pattern": "^v?\\d+\\.\\d+\\.\\d+$"
            },
            "url": {
              "type": "string",
              "format": "uri",
              "description": "The direct URL to download the installer or update package."
            },
            "signature": {
              "type": "string",
              "description": "The digital signature for this package, generated by Tauri."
            },
            "pub_date": {
              "type": "string",
              "format": "date-time",
              "description": "The publication date of this version in RFC 3339 format, e.g., '2025-05-01T10:00:00Z'.",
              "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
            },
            "notes": {
              "type": "string",
              "description": "Release notes or a changelog for this version."
            },
            "version_history": {
              "type": "array",
              "description": "An array of previous releases for this platform.",
              "items": {
                "type": "object",
                "title": "Version History Item",
                "description": "Information for a previous version release.",
                "properties": {
                  "version": {
                    "type": "string",
                    "description": "The version number for this historical release.",
                    "pattern": "^v?\\d+\\.\\d+\\.\\d+$"
                  },
                  "url": {
                    "type": "string",
                    "format": "uri",
                    "description": "The URL to download this historical release."
                  },
                  "signature": {
                    "type": "string",
                    "description": "The digital signature for this release."
                  },
                  "pub_date": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The publication date of this historical release.",
                    "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
                  },
                  "notes": {
                    "type": "string",
                    "description": "Release notes for this historical version."
                  }
                },
                "required": ["version", "url", "signature"]
              }
            }
          },
          "required": ["current_version", "url", "signature"]
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["platforms"],
  "additionalProperties": false
}
